document.addEventListener('DOMContentLoaded', () => {
    // Constants and Global Variables
    const canvas = document.getElementById('globeCanvas');
    const ctx = canvas.getContext('2d');
    const frameWidth = 350;
    const frameHeight = 350;
    const cols = 15;
    const totalFrames = 150;
    const initialFrameInterval = 1000 / 16;  // 16 fps for initial animation
    const buttonFrameInterval = 1000 / 32;  // 32 fps for button press animation
    const scrollFrameInterval = 1000 / 64;  // 32 fps for button press animation
    const originalFrameWidth = 350;
    const originalFrameHeight = 350;
    let currentFrame = 10;  // Start at frame 10
    let animationInterval;
    let animationDirection = 1; // 1 for forward, -1 for backward
    let isAnimating = false; // Flag to track if animation is running
    let lastScrollTime = 0; // Initialize the lastScrollTime variable
    const spriteSheet = new Image();
    spriteSheet.src = 'sprite.webp';

    const clickableAreas = [
        {
            imageIndex: 10,
            areas: 
            [
              {
                "id": "mountain",
                "points": [
                  {
                    "x": 112.50751,
                    "y": 64.738238
                  },
                  {
                    "x": 145.65177,
                    "y": 53.137738
                  },
                  {
                    "x": 114.71713,
                    "y": 25.517518
                  }
                ],
                "href": "location/mountain.html"
              },
              {
                "id": "crystal",
                "points": [
                  {
                    "x": 118.86016,
                    "y": 93.463268
                  },
                  {
                    "x": 123.9699,
                    "y": 66.395448
                  },
                  {
                    "x": 136.12279999999998,
                    "y": 61.561908
                  },
                  {
                    "x": 154.21403999999998,
                    "y": 62.252418000000006
                  },
                  {
                    "x": 165.95263999999997,
                    "y": 85.72959800000001
                  },
                  {
                    "x": 156.83795999999998,
                    "y": 106.03047000000001
                  },
                  {
                    "x": 129.29175999999998,
                    "y": 114.04033000000001
                  }
                ],
                "href": "location/crystal.html"
              },
              {
                "id": "mushroom",
                "points": [
                  {
                    "x": 166.5059,
                    "y": 127.71234
                  },
                  {
                    "x": 150.62341,
                    "y": 166.10444999999999
                  },
                  {
                    "x": 118.33729000000001,
                    "y": 172.4571
                  },
                  {
                    "x": 99.249796,
                    "y": 152.84674
                  },
                  {
                    "x": 121.62218,
                    "y": 118.04526000000001
                  },
                  {
                    "x": 146.61732,
                    "y": 112.65932000000001
                  }
                ],
                "href": "location/mushroom.html"
              },
              {
                "id": "santa",
                "points": [
                  {
                    "x": 158.90948,
                    "y": 67.016898
                  },
                  {
                    "x": 169.54327,
                    "y": 86.696308
                  },
                  {
                    "x": 206.89962,
                    "y": 79.653158
                  },
                  {
                    "x": 205.65671,
                    "y": 73.093348
                  },
                  {
                    "x": 199.235,
                    "y": 69.917028
                  },
                  {
                    "x": 197.50874000000002,
                    "y": 58.937988000000004
                  },
                  {
                    "x": 194.53957000000003,
                    "y": 50.030468000000006
                  },
                  {
                    "x": 189.70603000000003,
                    "y": 50.65191800000001
                  },
                  {
                    "x": 175.36941000000002,
                    "y": 72.26474800000001
                  },
                  {
                    "x": 167.817,
                    "y": 54.93305800000002
                  },
                  {
                    "x": 163.53587000000002,
                    "y": 55.485458000000015
                  }
                ],
                "href": "location/santa.html"
              },
              {
                "id": "north",
                "points": [
                  {
                    "x": 154.90455,
                    "y": 59.490388
                  },
                  {
                    "x": 154.28309,
                    "y": 37.808516000000004
                  },
                  {
                    "x": 193.43475999999998,
                    "y": 32.353522000000005
                  },
                  {
                    "x": 211.18075,
                    "y": 36.220353
                  },
                  {
                    "x": 207.93536999999998,
                    "y": 70.538478
                  },
                  {
                    "x": 202.13512999999998,
                    "y": 68.368708
                  },
                  {
                    "x": 195.16101999999998,
                    "y": 47.475594
                  },
                  {
                    "x": 187.22020999999998,
                    "y": 48.718508
                  },
                  {
                    "x": 176.03401999999997,
                    "y": 65.428738
                  },
                  {
                    "x": 168.99085999999997,
                    "y": 51.825778
                  },
                  {
                    "x": 161.11909999999997,
                    "y": 53.275838
                  },
                  {
                    "x": 157.59751999999997,
                    "y": 63.081018
                  }
                ],
                "href": "location/north.html"
              },
              {
                "id": "cookie",
                "points": [
                  {
                    "x": 187.47108,
                    "y": 105.76663
                  },
                  {
                    "x": 201.92361,
                    "y": 123.14873
                  },
                  {
                    "x": 257.58538,
                    "y": 133.30456
                  },
                  {
                    "x": 273.01443,
                    "y": 101.27463
                  },
                  {
                    "x": 270.28017,
                    "y": 87.255318
                  },
                  {
                    "x": 241.76572,
                    "y": 89.361048
                  },
                  {
                    "x": 233.36763,
                    "y": 87.847218
                  },
                  {
                    "x": 223.79771,
                    "y": 72.955478
                  },
                  {
                    "x": 209.29635,
                    "y": 78.424008
                  },
                  {
                    "x": 205.19495999999998,
                    "y": 83.501918
                  }
                ],
                "href": "location/cookie.html"
              },
              {
                "id": "skate",
                "points": [
                  {
                    "x": 236.5223,
                    "y": 56.590268
                  },
                  {
                    "x": 234.38174,
                    "y": 85.384348
                  },
                  {
                    "x": 224.30035,
                    "y": 69.986078
                  },
                  {
                    "x": 209.93784,
                    "y": 75.924428
                  },
                  {
                    "x": 210.14499,
                    "y": 64.11677800000001
                  },
                  {
                    "x": 233.13883,
                    "y": 55.07115800000001
                  }
                ],
                "href": "location/skate.html"
              },
              {
                "id": "digital",
                "points": [
                  {
                    "x": 263.63982,
                    "y": 180.56824
                  },
                  {
                    "x": 270.86608,
                    "y": 191.8959
                  },
                  {
                    "x": 269.49895000000004,
                    "y": 204.9813
                  },
                  {
                    "x": 286.49044000000004,
                    "y": 204.59069
                  },
                  {
                    "x": 312.46593,
                    "y": 215.72304
                  },
                  {
                    "x": 309.14576,
                    "y": 230.76148
                  },
                  {
                    "x": 278.87357,
                    "y": 231.3474
                  },
                  {
                    "x": 269.88955999999996,
                    "y": 243.84688
                  },
                  {
                    "x": 257.58538,
                    "y": 246.19054
                  },
                  {
                    "x": 252.31215999999998,
                    "y": 242.08914
                  },
                  {
                    "x": 224.77423,
                    "y": 236.42531
                  },
                  {
                    "x": 229.07092999999998,
                    "y": 221.58218
                  },
                  {
                    "x": 243.32815999999997,
                    "y": 181.93536999999998
                  }
                ],
                "href": "location/digital.html"
              },
              {
                "id": "cinema",
                "points": [
                  {
                    "x": 243.42581,
                    "y": 271.87307
                  },
                  {
                    "x": 264.71399,
                    "y": 285.05611999999996
                  },
                  {
                    "x": 290.10357000000005,
                    "y": 294.62604
                  },
                  {
                    "x": 290.68949000000003,
                    "y": 273.43550999999997
                  },
                  {
                    "x": 271.15904000000006,
                    "y": 244.92105999999995
                  },
                  {
                    "x": 259.78256000000005,
                    "y": 247.75296999999995
                  }
                ],
                "href": "location/cinema.html"
              },
              {
                "id": "cheese",
                "points": [
                  {
                    "x": 240.80344,
                    "y": 278.38065
                  },
                  {
                    "x": 243.70355999999998,
                    "y": 252.41764
                  },
                  {
                    "x": 226.99333,
                    "y": 251.03663
                  },
                  {
                    "x": 212.63081,
                    "y": 246.72401
                  },
                  {
                    "x": 175.36941,
                    "y": 251.72714
                  },
                  {
                    "x": 168.30035999999998,
                    "y": 255.73207
                  },
                  {
                    "x": 149.38049999999998,
                    "y": 262.91333
                  },
                  {
                    "x": 151.59011999999998,
                    "y": 269.84671999999995
                  },
                  {
                    "x": 161.53339999999997,
                    "y": 284.18089999999995
                  },
                  {
                    "x": 165.81453999999997,
                    "y": 284.18089999999995
                  },
                  {
                    "x": 171.33857999999998,
                    "y": 280.31406999999996
                  },
                  {
                    "x": 181.14376,
                    "y": 293.15746999999993
                  },
                  {
                    "x": 183.90578,
                    "y": 296.60999999999996
                  },
                  {
                    "x": 192.88235,
                    "y": 296.47189
                  },
                  {
                    "x": 208.62588,
                    "y": 278.51874999999995
                  },
                  {
                    "x": 222.57408999999998,
                    "y": 280.31406999999996
                  },
                  {
                    "x": 230.99826,
                    "y": 284.5952
                  }
                ],
                "href": "location/cheese.html"
              },
              {
                "id": "cactus",
                "points": [
                  {
                    "x": 158.21897,
                    "y": 285.1476
                  },
                  {
                    "x": 147.86139,
                    "y": 284.7333
                  },
                  {
                    "x": 139.98963,
                    "y": 311.11061
                  },
                  {
                    "x": 167.88605,
                    "y": 314.28694
                  },
                  {
                    "x": 177.82933,
                    "y": 322.71111
                  },
                  {
                    "x": 198.6826,
                    "y": 322.0206
                  },
                  {
                    "x": 203.10183,
                    "y": 320.63959
                  },
                  {
                    "x": 199.3731,
                    "y": 295.34146
                  },
                  {
                    "x": 193.71096,
                    "y": 300.20061999999996
                  },
                  {
                    "x": 182.38667,
                    "y": 299.78631999999993
                  },
                  {
                    "x": 171.06238000000002,
                    "y": 286.25240999999994
                  }
                ],
                "href": "location/cactus.html"
              },
              {
                "id": "volcano",
                "points": [
                  {
                    "x": 153.66164,
                    "y": 278.10445
                  },
                  {
                    "x": 145.37557,
                    "y": 261.53231
                  },
                  {
                    "x": 146.61848,
                    "y": 253.10815
                  },
                  {
                    "x": 142.75165,
                    "y": 238.19323
                  },
                  {
                    "x": 128.52724,
                    "y": 235.2931
                  },
                  {
                    "x": 116.51244000000001,
                    "y": 240.81715
                  },
                  {
                    "x": 116.37434000000002,
                    "y": 245.09828
                  },
                  {
                    "x": 104.77385000000001,
                    "y": 243.85537
                  },
                  {
                    "x": 100.76891,
                    "y": 250.20802
                  },
                  {
                    "x": 101.18322,
                    "y": 267.47066
                  },
                  {
                    "x": 114.99333,
                    "y": 265.81345
                  },
                  {
                    "x": 110.15979,
                    "y": 294.67658
                  },
                  {
                    "x": 129.49394,
                    "y": 281.55698
                  },
                  {
                    "x": 131.15116,
                    "y": 295.36709
                  }
                ],
                "href": "location/volcano.html"
              },
              {
                "id": "pharaoh",
                "points": [
                  {
                    "x": 92.068536,
                    "y": 236.25981
                  },
                  {
                    "x": 98.697396,
                    "y": 252.07238999999998
                  },
                  {
                    "x": 98.904546,
                    "y": 268.57547
                  },
                  {
                    "x": 101.25227,
                    "y": 270.37079
                  },
                  {
                    "x": 112.57656,
                    "y": 268.02307
                  },
                  {
                    "x": 109.19308,
                    "y": 286.94292
                  },
                  {
                    "x": 85.232536,
                    "y": 292.12171
                  },
                  {
                    "x": 84.74917599999999,
                    "y": 256.14637
                  },
                  {
                    "x": 78.87988599999998,
                    "y": 256.21547
                  },
                  {
                    "x": 80.53709599999999,
                    "y": 236.67416999999998
                  }
                ],
                "href": "location/pharaoh.html"
              },
              {
                "id": "skull",
                "points": [
                  {
                    "x": 50.367346,
                    "y": 176.95511
                  },
                  {
                    "x": 65.40578599999999,
                    "y": 172.0725
                  },
                  {
                    "x": 76.73344599999999,
                    "y": 193.45833
                  },
                  {
                    "x": 59.93726599999999,
                    "y": 214.74651999999998
                  },
                  {
                    "x": 37.672555999999986,
                    "y": 204.29772999999997
                  },
                  {
                    "x": 36.110115999999984,
                    "y": 183.49780999999996
                  }
                ],
                "href": "location/skull.html"
              },
              {
                "id": "rainbow",
                "points": [
                  {
                    "x": 84.936236,
                    "y": 112.79759
                  },
                  {
                    "x": 109.44694999999999,
                    "y": 89.654008
                  },
                  {
                    "x": 104.56433999999999,
                    "y": 79.40052800000001
                  },
                  {
                    "x": 87.96345599999998,
                    "y": 78.521658
                  },
                  {
                    "x": 75.75692599999998,
                    "y": 85.357308
                  },
                  {
                    "x": 73.80387599999997,
                    "y": 95.024878
                  },
                  {
                    "x": 77.22170599999997,
                    "y": 106.15724
                  }
                ],
                "href": "location/rainbow.html"
              },
              {
                "id": "neptune",
                "points": [
                  {
                    "x": 115.08931,
                    "y": 113.47064
                  },
                  {
                    "x": 87.97369599999999,
                    "y": 146.9484
                  },
                  {
                    "x": 91.67175599999999,
                    "y": 160.08903999999998
                  },
                  {
                    "x": 68.99276599999999,
                    "y": 149.65995999999998
                  },
                  {
                    "x": 73.28864599999999,
                    "y": 138.39655
                  },
                  {
                    "x": 89.22518599999998,
                    "y": 117.53838999999999
                  },
                  {
                    "x": 95.76700599999998,
                    "y": 112.12222999999999
                  }
                ],
                "href": "location/neptune.html"
              },
              {
                "id": "moon",
                "points": [
                  {
                    "x": 318.665,
                    "y": 31.846
                  },
                  {
                    "x": 329.51125,
                    "y": 39.528845000000004
                  },
                  {
                    "x": 332.01423,
                    "y": 54.528828000000004
                  },
                  {
                    "x": 324.50529,
                    "y": 62.47282800000001
                  },
                  {
                    "x": 313.65904,
                    "y": 62.47282800000001
                  },
                  {
                    "x": 304.48145,
                    "y": 54.528828000000004
                  },
                  {
                    "x": 304.27287,
                    "y": 40.988916
                  }
                ],
                "href": "location/moon.html"
              }
            ]            
        },
        {   imageIndex: 20,
            areas: [
              {
                "id": "cookie",
                "points": [
                  {
                    "x": 216.20267,
                    "y": 132.98422
                  },
                  {
                    "x": 231.04581000000002,
                    "y": 122.04717
                  },
                  {
                    "x": 232.21764000000002,
                    "y": 113.45376999999999
                  },
                  {
                    "x": 238.46738000000002,
                    "y": 104.86036999999999
                  },
                  {
                    "x": 234.95190000000002,
                    "y": 93.92331999999999
                  },
                  {
                    "x": 227.53033000000002,
                    "y": 90.79844999999999
                  },
                  {
                    "x": 214.64024,
                    "y": 93.92331999999999
                  },
                  {
                    "x": 212.68719000000002,
                    "y": 99.78244999999998
                  },
                  {
                    "x": 204.48441000000003,
                    "y": 90.79844999999999
                  },
                  {
                    "x": 195.89101000000002,
                    "y": 88.45479999999999
                  },
                  {
                    "x": 192.76614000000004,
                    "y": 87.28296999999999
                  },
                  {
                    "x": 191.59431000000004,
                    "y": 81.03322999999999
                  },
                  {
                    "x": 188.46944000000005,
                    "y": 76.34591999999999
                  },
                  {
                    "x": 182.61031000000006,
                    "y": 72.83044
                  },
                  {
                    "x": 174.80533000000005,
                    "y": 75.95531
                  },
                  {
                    "x": 166.98595000000006,
                    "y": 80.64262
                  },
                  {
                    "x": 167.76717000000005,
                    "y": 90.40784
                  },
                  {
                    "x": 152.14281000000005,
                    "y": 92.7515
                  },
                  {
                    "x": 154.09585000000004,
                    "y": 111.11012
                  },
                  {
                    "x": 168.15778000000003,
                    "y": 120.87534
                  }
                ],
                "href": "location/cookie.html"
              },
              {
                "id": "skate",
                "points": [
                  {
                    "x": 218.41939,
                    "y": 88.72165
                  },
                  {
                    "x": 220.07659999999998,
                    "y": 73.18527999999999
                  },
                  {
                    "x": 219.17893999999998,
                    "y": 66.62548
                  },
                  {
                    "x": 218.97178999999997,
                    "y": 61.584779999999995
                  },
                  {
                    "x": 212.61913999999996,
                    "y": 55.99168999999999
                  },
                  {
                    "x": 207.23319999999995,
                    "y": 56.19883999999999
                  },
                  {
                    "x": 202.67585999999994,
                    "y": 59.30611999999999
                  },
                  {
                    "x": 199.84478999999993,
                    "y": 63.794399999999996
                  },
                  {
                    "x": 199.22332999999992,
                    "y": 65.79687
                  },
                  {
                    "x": 194.52788999999993,
                    "y": 71.32091
                  },
                  {
                    "x": 192.80162999999993,
                    "y": 75.32584
                  },
                  {
                    "x": 192.93972999999994,
                    "y": 79.05457
                  },
                  {
                    "x": 194.04453999999993,
                    "y": 81.54039
                  },
                  {
                    "x": 194.87314999999992,
                    "y": 84.16432
                  },
                  {
                    "x": 198.80902999999992,
                    "y": 86.78824
                  },
                  {
                    "x": 202.33060999999992,
                    "y": 87.61684
                  },
                  {
                    "x": 209.78806999999992,
                    "y": 89.20501
                  }
                ],
                "href": "location/skate.html"
              },
              {
                "id": "santa",
                "points": [
                  {
                    "x": 182.6512,
                    "y": 70.28516
                  },
                  {
                    "x": 173.46747,
                    "y": 51.779610000000005
                  },
                  {
                    "x": 168.21963,
                    "y": 54.40353
                  },
                  {
                    "x": 163.86945,
                    "y": 62.55149
                  },
                  {
                    "x": 160.14072,
                    "y": 69.59465
                  },
                  {
                    "x": 155.51433,
                    "y": 70.69946
                  },
                  {
                    "x": 153.16661,
                    "y": 63.5182
                  },
                  {
                    "x": 147.29730999999998,
                    "y": 57.5108
                  },
                  {
                    "x": 141.84231999999997,
                    "y": 58.615610000000004
                  },
                  {
                    "x": 138.59693999999996,
                    "y": 62.82770000000001
                  },
                  {
                    "x": 139.01124999999996,
                    "y": 72.77098000000001
                  },
                  {
                    "x": 139.08034999999995,
                    "y": 78.36407000000001
                  },
                  {
                    "x": 140.18515999999994,
                    "y": 81.19514000000001
                  },
                  {
                    "x": 142.18761999999995,
                    "y": 85.82153000000001
                  },
                  {
                    "x": 147.78071999999995,
                    "y": 87.34064000000001
                  },
                  {
                    "x": 155.79057999999995,
                    "y": 84.44052
                  },
                  {
                    "x": 161.45272999999995,
                    "y": 80.57369
                  },
                  {
                    "x": 167.46012999999994,
                    "y": 78.50216999999999
                  },
                  {
                    "x": 172.36271999999994,
                    "y": 75.74014999999999
                  }
                ],
                "href": "location/santa.html"
              },
              {
                "id": "crystal",
                "points": [
                  {
                    "x": 124.44158,
                    "y": 64.89921
                  },
                  {
                    "x": 138.0898,
                    "y": 80.50464
                  },
                  {
                    "x": 140.53036,
                    "y": 85.82153
                  },
                  {
                    "x": 133.76341,
                    "y": 97.42202
                  },
                  {
                    "x": 126.02973999999999,
                    "y": 104.25803
                  },
                  {
                    "x": 105.45267999999999,
                    "y": 114.20131
                  },
                  {
                    "x": 91.50446399999998,
                    "y": 95.83386
                  },
                  {
                    "x": 93.43788399999998,
                    "y": 84.37147
                  },
                  {
                    "x": 96.33800399999998,
                    "y": 81.33324
                  },
                  {
                    "x": 96.33800399999998,
                    "y": 67.93744000000001
                  },
                  {
                    "x": 99.23812999999998,
                    "y": 61.58479000000001
                  },
                  {
                    "x": 106.97178999999998,
                    "y": 62.13719000000001
                  }
                ],
                "href": "location/crystal.html"
              },
              {
                "id": "mushroom",
                "points": [
                  {
                    "x": 114.56735,
                    "y": 153.83633
                  },
                  {
                    "x": 125.33924,
                    "y": 137.5404
                  },
                  {
                    "x": 124.09633000000001,
                    "y": 128.01142000000002
                  },
                  {
                    "x": 114.84355000000001,
                    "y": 120.96826000000001
                  },
                  {
                    "x": 107.6623,
                    "y": 116.27283000000001
                  },
                  {
                    "x": 99.92863,
                    "y": 116.27283000000001
                  },
                  {
                    "x": 87.63763399999999,
                    "y": 115.99662000000001
                  },
                  {
                    "x": 81.00878399999999,
                    "y": 122.90168000000001
                  },
                  {
                    "x": 76.037144,
                    "y": 130.35914000000002
                  },
                  {
                    "x": 70.374994,
                    "y": 140.57862000000003
                  },
                  {
                    "x": 66.508164,
                    "y": 148.72659000000004
                  },
                  {
                    "x": 64.85095399999999,
                    "y": 157.97936000000004
                  },
                  {
                    "x": 71.61790399999998,
                    "y": 163.50341000000003
                  },
                  {
                    "x": 80.18017399999998,
                    "y": 169.30365000000003
                  },
                  {
                    "x": 93.71408399999999,
                    "y": 171.78947000000002
                  },
                  {
                    "x": 108.07659999999998,
                    "y": 170.13226000000003
                  },
                  {
                    "x": 114.42924999999998,
                    "y": 154.38873000000004
                  }
                ],
                "href": "location/mushroom.html"
              },
              {
                "id": "pirate",
                "points": [
                  {
                    "x": 62.302764,
                    "y": 203.68443
                  },
                  {
                    "x": 61.32623400000001,
                    "y": 182.78685
                  },
                  {
                    "x": 53.904664000000004,
                    "y": 174.97467999999998
                  },
                  {
                    "x": 43.35822400000001,
                    "y": 175.95839999999998
                  },
                  {
                    "x": 38.67092400000001,
                    "y": 181.81033
                  },
                  {
                    "x": 35.74135400000001,
                    "y": 189.81780999999998
                  },
                  {
                    "x": 38.47561400000001,
                    "y": 198.99711999999997
                  },
                  {
                    "x": 45.89718400000001,
                    "y": 202.90320999999997
                  },
                  {
                    "x": 52.53753400000001,
                    "y": 208.17642999999998
                  },
                  {
                    "x": 61.32623400000001,
                    "y": 206.41868999999997
                  }
                ],
                "href": "location/pirate.html"
              },
              {
                "id": "cheese",
                "points": [
                  {
                    "x": 120.69879,
                    "y": 265.01003
                  },
                  {
                    "x": 123.23775,
                    "y": 273.21281999999997
                  },
                  {
                    "x": 124.80019,
                    "y": 280.43908
                  },
                  {
                    "x": 128.31567,
                    "y": 284.34517
                  },
                  {
                    "x": 133.9795,
                    "y": 284.14987
                  },
                  {
                    "x": 139.83863,
                    "y": 282.97804
                  },
                  {
                    "x": 141.59637,
                    "y": 286.29822
                  },
                  {
                    "x": 146.86959000000002,
                    "y": 295.86814000000004
                  },
                  {
                    "x": 149.60385000000002,
                    "y": 297.82118
                  },
                  {
                    "x": 154.48646000000002,
                    "y": 298.40709000000004
                  },
                  {
                    "x": 159.17377000000002,
                    "y": 298.40709000000004
                  },
                  {
                    "x": 163.86108000000002,
                    "y": 290.009
                  },
                  {
                    "x": 172.84508000000002,
                    "y": 283.36865
                  },
                  {
                    "x": 179.29013000000003,
                    "y": 280.04848
                  },
                  {
                    "x": 193.35205000000002,
                    "y": 284.14986999999996
                  },
                  {
                    "x": 199.21119000000002,
                    "y": 285.12638999999996
                  },
                  {
                    "x": 208.97641000000002,
                    "y": 280.43907999999993
                  },
                  {
                    "x": 213.07780000000002,
                    "y": 264.81472999999994
                  },
                  {
                    "x": 212.49189,
                    "y": 256.8072399999999
                  },
                  {
                    "x": 206.43745,
                    "y": 250.1668899999999
                  },
                  {
                    "x": 196.67223,
                    "y": 250.36219999999992
                  },
                  {
                    "x": 189.44596,
                    "y": 253.8776799999999
                  },
                  {
                    "x": 182.61031000000003,
                    "y": 249.58097999999993
                  },
                  {
                    "x": 174.80533000000003,
                    "y": 245.87018999999992
                  },
                  {
                    "x": 158.00194000000002,
                    "y": 249.58097999999993
                  },
                  {
                    "x": 144.91654000000003,
                    "y": 245.87018999999992
                  },
                  {
                    "x": 132.61236000000002,
                    "y": 252.90115999999992
                  },
                  {
                    "x": 121.48001000000002,
                    "y": 258.76028999999994
                  }
                ],
                "href": "location/cheese.html"
              },
              {
                "id": "cactus",
                "points": [
                  {
                    "x": 168.64604,
                    "y": 323.11311
                  },
                  {
                    "x": 179.48543,
                    "y": 325.74972
                  },
                  {
                    "x": 187.78587000000002,
                    "y": 321.94128
                  },
                  {
                    "x": 190.71544000000003,
                    "y": 310.41832
                  },
                  {
                    "x": 190.61774000000003,
                    "y": 301.23901
                  },
                  {
                    "x": 186.61400000000003,
                    "y": 294.1104
                  },
                  {
                    "x": 173.72390000000004,
                    "y": 285.22404
                  },
                  {
                    "x": 168.64599000000004,
                    "y": 290.20431
                  },
                  {
                    "x": 164.83755000000005,
                    "y": 294.40335000000005
                  },
                  {
                    "x": 162.88451000000006,
                    "y": 298.90709000000004
                  },
                  {
                    "x": 159.44226000000006,
                    "y": 303.70473000000004
                  },
                  {
                    "x": 153.24135000000007,
                    "y": 303.63153000000005
                  },
                  {
                    "x": 150.09206000000006,
                    "y": 301.53201000000007
                  },
                  {
                    "x": 147.69958000000005,
                    "y": 299.84751000000006
                  },
                  {
                    "x": 144.53524000000004,
                    "y": 297.46152000000006
                  },
                  {
                    "x": 140.66841000000005,
                    "y": 289.2099800000001
                  },
                  {
                    "x": 139.44797000000005,
                    "y": 287.1771300000001
                  },
                  {
                    "x": 135.73719000000006,
                    "y": 286.5912200000001
                  },
                  {
                    "x": 132.12405000000007,
                    "y": 290.59496000000007
                  },
                  {
                    "x": 128.60857000000007,
                    "y": 296.9423500000001
                  },
                  {
                    "x": 124.60483000000008,
                    "y": 302.0202700000001
                  },
                  {
                    "x": 122.84709000000008,
                    "y": 306.8052300000001
                  },
                  {
                    "x": 128.99918000000008,
                    "y": 315.20332000000013
                  }
                ],
                "href": "location/cactus.html"
              },
              {
                "id": "lightbulb",
                "points": [
                  {
                    "x": 212.29658,
                    "y": 284.57834
                  },
                  {
                    "x": 225.08903,
                    "y": 279.75552000000005
                  },
                  {
                    "x": 233.97538,
                    "y": 277.11891
                  },
                  {
                    "x": 238.17443,
                    "y": 278.48604
                  },
                  {
                    "x": 242.27582,
                    "y": 281.025
                  },
                  {
                    "x": 244.81478,
                    "y": 283.85690999999997
                  },
                  {
                    "x": 245.9866,
                    "y": 287.95831
                  },
                  {
                    "x": 243.44765,
                    "y": 293.23152999999996
                  },
                  {
                    "x": 233.78007000000002,
                    "y": 298.90709
                  },
                  {
                    "x": 223.91720000000004,
                    "y": 296.74701
                  },
                  {
                    "x": 216.98389000000003,
                    "y": 292.255
                  },
                  {
                    "x": 211.80832000000004,
                    "y": 290.30196
                  }
                ],
                "href": "location/lightbulb.html"
              },
              {
                "id": "cinema",
                "points": [
                  {
                    "x": 226.94442,
                    "y": 273.11517
                  },
                  {
                    "x": 227.04202,
                    "y": 265.6936
                  },
                  {
                    "x": 229.58098,
                    "y": 257.68611
                  },
                  {
                    "x": 236.51429000000002,
                    "y": 251.72932999999998
                  },
                  {
                    "x": 242.76403000000002,
                    "y": 247.13966999999997
                  },
                  {
                    "x": 248.42786,
                    "y": 243.81949999999998
                  },
                  {
                    "x": 253.01751000000002,
                    "y": 244.01479999999998
                  },
                  {
                    "x": 258.9743,
                    "y": 245.33184999999997
                  },
                  {
                    "x": 263.66161000000005,
                    "y": 256.80724
                  },
                  {
                    "x": 266.59117000000003,
                    "y": 264.22880999999995
                  },
                  {
                    "x": 266.98178,
                    "y": 272.11947
                  },
                  {
                    "x": 267.95831000000004,
                    "y": 280.63439
                  },
                  {
                    "x": 270.30196000000007,
                    "y": 286.29822
                  },
                  {
                    "x": 270.49726000000004,
                    "y": 289.03248
                  },
                  {
                    "x": 266.00526,
                    "y": 288.01636
                  },
                  {
                    "x": 254.09169000000003,
                    "y": 288.01636
                  },
                  {
                    "x": 247.21342000000004,
                    "y": 284.13472
                  },
                  {
                    "x": 244.79665000000003,
                    "y": 281.3727
                  },
                  {
                    "x": 242.10368000000003,
                    "y": 278.40353
                  },
                  {
                    "x": 239.68691,
                    "y": 276.59532
                  },
                  {
                    "x": 234.50812000000002,
                    "y": 274.19144
                  },
                  {
                    "x": 227.74116,
                    "y": 274.951
                  }
                ],
                "href": "location/cinema.html"
              },
              {
                "id": "digital",
                "points": [
                  {
                    "x": 248.74352,
                    "y": 231.61297
                  },
                  {
                    "x": 267.56775,
                    "y": 233.37071
                  },
                  {
                    "x": 281.04375,
                    "y": 232.58949
                  },
                  {
                    "x": 287.68411,
                    "y": 231.41766
                  },
                  {
                    "x": 290.41837,
                    "y": 224.19140000000002
                  },
                  {
                    "x": 285.14515,
                    "y": 213.25435000000002
                  },
                  {
                    "x": 275.18462,
                    "y": 204.27034
                  },
                  {
                    "x": 258.38844,
                    "y": 207.00461
                  },
                  {
                    "x": 246.51962,
                    "y": 205.63748
                  },
                  {
                    "x": 237.10025000000002,
                    "y": 202.70791
                  },
                  {
                    "x": 230.26459000000003,
                    "y": 201.73139
                  },
                  {
                    "x": 226.44305000000003,
                    "y": 190.79434
                  },
                  {
                    "x": 217.76511000000002,
                    "y": 180.6385
                  },
                  {
                    "x": 207.41397000000003,
                    "y": 181.61503
                  },
                  {
                    "x": 195.89101000000002,
                    "y": 189.62250999999998
                  },
                  {
                    "x": 191.21611000000001,
                    "y": 195.87224999999998
                  },
                  {
                    "x": 202.14075000000003,
                    "y": 203.68443
                  },
                  {
                    "x": 203.31258000000003,
                    "y": 211.30131
                  },
                  {
                    "x": 207.99989000000002,
                    "y": 223.41018
                  },
                  {
                    "x": 215.22615000000002,
                    "y": 232.7848
                  },
                  {
                    "x": 216.39798000000002,
                    "y": 241.18289
                  },
                  {
                    "x": 226.44305000000003,
                    "y": 248.99507
                  },
                  {
                    "x": 233.78007000000002,
                    "y": 246.84672
                  }
                ],
                "href": "location/digital.html"
              },
              {
                "id": "artificial",
                "points": [
                  {
                    "x": 288.46532,
                    "y": 160.91275
                  },
                  {
                    "x": 297.64463,
                    "y": 164.23292999999998
                  },
                  {
                    "x": 301.55072,
                    "y": 166.96719
                  },
                  {
                    "x": 304.48029,
                    "y": 173.21694
                  },
                  {
                    "x": 305.84742,
                    "y": 180.11633
                  },
                  {
                    "x": 305.84742,
                    "y": 185.71642
                  },
                  {
                    "x": 301.94133,
                    "y": 189.42721
                  },
                  {
                    "x": 297.64463,
                    "y": 196.65347
                  },
                  {
                    "x": 289.63715,
                    "y": 197.23938
                  },
                  {
                    "x": 285.14515,
                    "y": 195.09103000000002
                  },
                  {
                    "x": 283.1921,
                    "y": 189.03660000000002
                  },
                  {
                    "x": 282.21558,
                    "y": 180.11633000000003
                  },
                  {
                    "x": 283.1921,
                    "y": 173.60754000000003
                  },
                  {
                    "x": 284.36393,
                    "y": 165.40476000000004
                  }
                ],
                "href": "location/artificial.html"
              },
              {
                "id": "moon",
                "points": [
                  {
                    "x": 327.52622,
                    "y": 69.48636
                  },
                  {
                    "x": 332.21352,
                    "y": 60.135650000000005
                  },
                  {
                    "x": 331.43231000000003,
                    "y": 55.48438
                  },
                  {
                    "x": 329.47926,
                    "y": 46.269033
                  },
                  {
                    "x": 325.57317,
                    "y": 40.800508
                  },
                  {
                    "x": 317.56569,
                    "y": 39.433377
                  },
                  {
                    "x": 308.38638000000003,
                    "y": 39.823986
                  },
                  {
                    "x": 303.89438,
                    "y": 49.3939
                  },
                  {
                    "x": 303.11316,
                    "y": 55.48438
                  },
                  {
                    "x": 306.34742,
                    "y": 66.58070000000001
                  },
                  {
                    "x": 312.09716,
                    "y": 74.00227000000001
                  }
                ],
                "href": "location/moon.html"
              },
              {
                "id": "volcano",
                "points": [
                  {
                    "x": 124.36311,
                    "y": 282.48784
                  },
                  {
                    "x": 119.18755,
                    "y": 263.1527
                  },
                  {
                    "x": 112.05893,
                    "y": 245.52522
                  },
                  {
                    "x": 102.00075000000001,
                    "y": 241.86451
                  },
                  {
                    "x": 95.94630900000001,
                    "y": 241.47391
                  },
                  {
                    "x": 86.66934900000001,
                    "y": 241.57161
                  },
                  {
                    "x": 81.49377900000002,
                    "y": 246.94248
                  },
                  {
                    "x": 75.73229900000001,
                    "y": 256.90301
                  },
                  {
                    "x": 75.43933900000002,
                    "y": 265.69171
                  },
                  {
                    "x": 81.29847900000001,
                    "y": 269.98841
                  },
                  {
                    "x": 90.18482900000001,
                    "y": 270.67197
                  },
                  {
                    "x": 89.01300900000001,
                    "y": 293.22964
                  },
                  {
                    "x": 93.99326900000001,
                    "y": 296.54981000000004
                  },
                  {
                    "x": 106.19980000000001,
                    "y": 288.15172
                  },
                  {
                    "x": 105.80919000000002,
                    "y": 297.23338
                  }
                ],
                "href": "location/volcano.html"
              },
              {
                "id": "mountain",
                "points": [
                  {
                    "x": 110.20354,
                    "y": 58.375968
                  },
                  {
                    "x": 126.99972,
                    "y": 60.524318
                  },
                  {
                    "x": 132.85886,
                    "y": 50.954408
                  },
                  {
                    "x": 111.96127999999999,
                    "y": 30.838046000000002
                  }
                ],
                "href": "location/mountain.html"
              },
              {
                "id": "north",
                "points": [
                  {
                    "x": 185.00515,
                    "y": 58.375968
                  },
                  {
                    "x": 201.41072,
                    "y": 29.729836
                  },
                  {
                    "x": 207.26986,
                    "y": 53.102748
                  },
                  {
                    "x": 190.47367,
                    "y": 66.188148
                  }
                ],
                "href": "location/north.html"
              }
            ]
        },
        {   imageIndex: 30,
          areas: [
            {
              "id": "moon",
              "points": [
                {
                  "x": 317.46126,
                  "y": 45.470799
                },
                {
                  "x": 322.25863999999996,
                  "y": 46.513707
                },
                {
                  "x": 331.01906999999994,
                  "y": 59.028605999999996
                },
                {
                  "x": 331.43622999999997,
                  "y": 73.003576
                },
                {
                  "x": 318.50417,
                  "y": 78.009535
                },
                {
                  "x": 305.98927,
                  "y": 69.666269
                },
                {
                  "x": 305.36352999999997,
                  "y": 54.022646
                }
              ],
              "href": "location/moon.html"
            },
            {
              "id": "altair",
              "points": [
                {
                  "x": 256.55542,
                  "y": 103.03933
                },
                {
                  "x": 271.78188,
                  "y": 88.43861700000001
                },
                {
                  "x": 285.96544,
                  "y": 90.52443400000001
                },
                {
                  "x": 287.21693,
                  "y": 111.59118000000001
                },
                {
                  "x": 269.90465,
                  "y": 124.10608
                }
              ],
              "href": "location/altair.html"
            },
            {
              "id": "bakery",
              "points": [
                {
                  "x": 245.91776,
                  "y": 95.738975
                },
                {
                  "x": 258.22407999999996,
                  "y": 77.38379
                },
                {
                  "x": 232.77711999999997,
                  "y": 61.752467
                },
                {
                  "x": 217.55065999999997,
                  "y": 74.46364700000001
                },
                {
                  "x": 220.05363999999997,
                  "y": 83.849821
                }
              ],
              "href": "location/bakery.html"
            },
            {
              "id": "digital",
              "points": [
                {
                  "x": 182.09178,
                  "y": 191.89511
                },
                {
                  "x": 196.90107,
                  "y": 203.15851999999998
                },
                {
                  "x": 244.87485,
                  "y": 207.95589999999999
                },
                {
                  "x": 248.21216,
                  "y": 213.58759999999998
                },
                {
                  "x": 245.29201,
                  "y": 232.56852999999998
                },
                {
                  "x": 218.59356,
                  "y": 234.02861
                },
                {
                  "x": 205.45292,
                  "y": 226.51967
                },
                {
                  "x": 184.17759,
                  "y": 246.75208999999998
                },
                {
                  "x": 169.3683,
                  "y": 243.83193999999997
                },
                {
                  "x": 166.03099,
                  "y": 233.61144
                },
                {
                  "x": 151.63886,
                  "y": 233.82002
                },
                {
                  "x": 142.0441,
                  "y": 240.07747
                },
                {
                  "x": 133.70083,
                  "y": 234.23719
                },
                {
                  "x": 139.54112,
                  "y": 222.55662
                },
                {
                  "x": 155.60191,
                  "y": 214.42193
                },
                {
                  "x": 143.50417000000002,
                  "y": 195.23242
                },
                {
                  "x": 147.46722000000003,
                  "y": 183.76042999999999
                },
                {
                  "x": 163.52801000000002,
                  "y": 177.50297999999998
                }
              ],
              "href": "location/digital.html"
            },
            {
              "id": "cinema",
              "points": [
                {
                  "x": 238.6174,
                  "y": 287.00834
                },
                {
                  "x": 240.49464,
                  "y": 262.18712999999997
                },
                {
                  "x": 231.52563,
                  "y": 243.83193999999997
                },
                {
                  "x": 214.00477,
                  "y": 242.37186999999997
                },
                {
                  "x": 196.27533,
                  "y": 253.21811999999997
                },
                {
                  "x": 189.18355,
                  "y": 274.70203
                },
                {
                  "x": 201.07271,
                  "y": 277.41359
                },
                {
                  "x": 207.53874,
                  "y": 276.99642
                },
                {
                  "x": 218.80214999999998,
                  "y": 285.75685
                }
              ],
              "href": "location/cinema.html"
            },
            {
              "id": "cheese",
              "points": [
                {
                  "x": 167.69964,
                  "y": 284.29678
                },
                {
                  "x": 182.50894,
                  "y": 269.69607
                },
                {
                  "x": 180.21454,
                  "y": 261.14422
                },
                {
                  "x": 172.07986,
                  "y": 252.80095000000003
                },
                {
                  "x": 165.82241,
                  "y": 250.50656000000004
                },
                {
                  "x": 157.27056,
                  "y": 251.13230000000004
                },
                {
                  "x": 152.47317999999999,
                  "y": 252.17521000000005
                },
                {
                  "x": 139.33254,
                  "y": 244.87485000000004
                },
                {
                  "x": 105.33373,
                  "y": 252.17521000000005
                },
                {
                  "x": 97.824791,
                  "y": 261.35280000000006
                },
                {
                  "x": 100.74493000000001,
                  "y": 279.29082000000005
                },
                {
                  "x": 106.58522,
                  "y": 282.83671000000004
                },
                {
                  "x": 113.05125000000001,
                  "y": 282.62813000000006
                },
                {
                  "x": 116.17998000000001,
                  "y": 295.7687700000001
                },
                {
                  "x": 123.68892000000001,
                  "y": 298.06317000000007
                },
                {
                  "x": 152.89035,
                  "y": 275.74493000000007
                },
                {
                  "x": 156.43623000000002,
                  "y": 281.7938000000001
                }
              ],
              "href": "location/cheese.html"
            },
            {
              "id": "hotel",
              "points": [
                {
                  "x": 188.53644,
                  "y": 294.10012
                },
                {
                  "x": 188.53644,
                  "y": 315.37545
                },
                {
                  "x": 178.12872,
                  "y": 324.76162
                },
                {
                  "x": 168.32539,
                  "y": 313.49821
                },
                {
                  "x": 166.86532,
                  "y": 291.38856
                }
              ],
              "href": "location/hotel.html"
            },
            {
              "id": "cactus",
              "points": [
                {
                  "x": 169.3683,
                  "y": 318.71275
                },
                {
                  "x": 166.3265,
                  "y": 312.97676
                },
                {
                  "x": 164.46663,
                  "y": 289.92849
                },
                {
                  "x": 150.49166,
                  "y": 283.25387
                },
                {
                  "x": 143.50417,
                  "y": 285.54827
                },
                {
                  "x": 118.16149999999999,
                  "y": 304.00775
                },
                {
                  "x": 119.10011999999999,
                  "y": 309.95232
                },
                {
                  "x": 124.00178999999999,
                  "y": 311.30811
                },
                {
                  "x": 143.08701,
                  "y": 312.5596
                },
                {
                  "x": 145.06852999999998,
                  "y": 318.50417
                }
              ],
              "href": "location/cactus.html"
            },
            {
              "id": "volcano",
              "points": [
                {
                  "x": 74.880811,
                  "y": 240.70322
                },
                {
                  "x": 83.224076,
                  "y": 238.40882
                },
                {
                  "x": 95.351959,
                  "y": 259.729
                },
                {
                  "x": 99.48166499999999,
                  "y": 280.96749
                },
                {
                  "x": 103.83259999999999,
                  "y": 284.58098
                },
                {
                  "x": 88.12497399999998,
                  "y": 293.94656000000003
                },
                {
                  "x": 84.80645999999999,
                  "y": 292.84039
                },
                {
                  "x": 82.88909699999999,
                  "y": 283.40107
                },
                {
                  "x": 83.626544,
                  "y": 280.59877
                },
                {
                  "x": 75.21964299999999,
                  "y": 267.91467
                },
                {
                  "x": 66.14903899999999,
                  "y": 264.44867
                }
              ],
              "href": "location/volcano.html"
            },
            {
              "id": "mushroom",
              "points": [
                {
                  "x": 74.046484,
                  "y": 167.49106
                },
                {
                  "x": 93.235995,
                  "y": 130.57211
                },
                {
                  "x": 75.089392,
                  "y": 109.0882
                },
                {
                  "x": 51.519666,
                  "y": 120.35161
                },
                {
                  "x": 42.133492000000004,
                  "y": 145.17282
                },
                {
                  "x": 46.305125000000004,
                  "y": 161.02503000000002
                },
                {
                  "x": 57.568534,
                  "y": 166.23957000000001
                }
              ],
              "href": "location/mushroom.html"
            },
            {
              "id": "cookie",
              "points": [
                {
                  "x": 175,
                  "y": 131.19785
                },
                {
                  "x": 198.77831,
                  "y": 115.34564999999999
                },
                {
                  "x": 198.15256,
                  "y": 99.493445
                },
                {
                  "x": 189.39213,
                  "y": 89.272944
                },
                {
                  "x": 172.49702000000002,
                  "y": 92.401669
                },
                {
                  "x": 162.06794000000002,
                  "y": 88.438617
                },
                {
                  "x": 157.06198000000003,
                  "y": 86.978546
                },
                {
                  "x": 153.30751000000004,
                  "y": 78.754734
                },
                {
                  "x": 146.21573000000004,
                  "y": 75.715137
                },
                {
                  "x": 142.25268000000003,
                  "y": 74.04648399999999
                },
                {
                  "x": 129.32062000000002,
                  "y": 87.60429099999999
                },
                {
                  "x": 114.92849000000002,
                  "y": 93.65315899999999
                },
                {
                  "x": 116.59714000000002,
                  "y": 104.91657
                },
                {
                  "x": 125.98331000000002,
                  "y": 118.47437
                },
                {
                  "x": 139.74970000000002,
                  "y": 113.25983
                }
              ],
              "href": "location/cookie.html"
            },
            {
              "id": "skate",
              "points": [
                {
                  "x": 182.37076,
                  "y": 87.092547
                },
                {
                  "x": 193.06375,
                  "y": 87.387526
                },
                {
                  "x": 197.63592,
                  "y": 82.44662799999999
                },
                {
                  "x": 197.48843,
                  "y": 73.45184799999998
                },
                {
                  "x": 192.99000999999998,
                  "y": 66.37027299999998
                },
                {
                  "x": 193.43247,
                  "y": 60.24945899999998
                },
                {
                  "x": 188.04910999999998,
                  "y": 56.19349799999998
                },
                {
                  "x": 183.32943999999998,
                  "y": 55.08732699999997
                },
                {
                  "x": 178.16731,
                  "y": 57.15217999999997
                },
                {
                  "x": 176.24994999999998,
                  "y": 59.438266999999975
                },
                {
                  "x": 176.02871,
                  "y": 68.73010499999998
                },
                {
                  "x": 171.30904999999998,
                  "y": 73.45184799999998
                },
                {
                  "x": 171.45654,
                  "y": 81.56169099999998
                }
              ],
              "href": "location/skate.html"
            },
            {
              "id": "santa",
              "points": [
                {
                  "x": 142.40111,
                  "y": 71.901129
                },
                {
                  "x": 156.26512,
                  "y": 78.68564599999999
                },
                {
                  "x": 166.58939,
                  "y": 78.75938599999999
                },
                {
                  "x": 168.21177,
                  "y": 71.75363499999999
                },
                {
                  "x": 167.1056,
                  "y": 67.84516299999999
                },
                {
                  "x": 153.83154000000002,
                  "y": 49.40897599999998
                },
                {
                  "x": 151.91418000000002,
                  "y": 49.70395499999998
                },
                {
                  "x": 146.97328000000002,
                  "y": 67.99265299999998
                },
                {
                  "x": 142.47485,
                  "y": 68.95133399999997
                },
                {
                  "x": 129.93825,
                  "y": 55.23481099999997
                },
                {
                  "x": 127.28343000000001,
                  "y": 55.30855099999997
                },
                {
                  "x": 125.58731000000002,
                  "y": 57.29965899999997
                },
                {
                  "x": 125.21858000000002,
                  "y": 72.93354599999996
                },
                {
                  "x": 118.28658000000001,
                  "y": 83.99525799999996
                },
                {
                  "x": 130.30697,
                  "y": 83.77402399999997
                }
              ],
              "href": "location/santa.html"
            },
            {
              "id": "crystal",
              "points": [
                {
                  "x": 113.78815,
                  "y": 90.189827
                },
                {
                  "x": 118.36032,
                  "y": 79.275604
                },
                {
                  "x": 108.1098,
                  "y": 63.789207
                },
                {
                  "x": 80.160541,
                  "y": 61.060651
                },
                {
                  "x": 78.464412,
                  "y": 75.662111
                },
                {
                  "x": 70.573724,
                  "y": 91.664722
                },
                {
                  "x": 89.452379,
                  "y": 111.5758
                },
                {
                  "x": 110.10091,
                  "y": 97.785536
                }
              ],
              "href": "location/crystal.html"
            },
            {
              "id": "mountain",
              "points": [
                {
                  "x": 112.53449,
                  "y": 53.538687
                },
                {
                  "x": 122.56377,
                  "y": 55.751029
                },
                {
                  "x": 136.87025,
                  "y": 48.868207000000005
                },
                {
                  "x": 115.63176,
                  "y": 26.548109000000004
                }
              ],
              "href": "location/mountain.html"
            },
            {
              "id": "north",
              "points": [
                {
                  "x": 153.38908,
                  "y": 39.232206
                },
                {
                  "x": 170.80527,
                  "y": 64.45291
                },
                {
                  "x": 180.67463,
                  "y": 49.85145
                },
                {
                  "x": 194.53864000000002,
                  "y": 54.564553000000004
                },
                {
                  "x": 204.56793000000002,
                  "y": 47.934086
                },
                {
                  "x": 202.20810000000003,
                  "y": 30.530326000000002
                },
                {
                  "x": 179.19974000000002,
                  "y": 37.462332
                }
              ],
              "href": "location/north.html"
            },
            {
              "id": "artificial",
              "points": [
                {
                  "x": 284.29678,
                  "y": 193.77235
                },
                {
                  "x": 289.7199,
                  "y": 176.93424
                },
                {
                  "x": 287.73233,
                  "y": 164.98808
                },
                {
                  "x": 275.74493,
                  "y": 161.44218999999998
                },
                {
                  "x": 269.48749000000004,
                  "y": 162.27651999999998
                },
                {
                  "x": 266.15018000000003,
                  "y": 167.69964
                },
                {
                  "x": 263.02145,
                  "y": 175
                },
                {
                  "x": 263.02145,
                  "y": 178.12872
                },
                {
                  "x": 264.48153,
                  "y": 182.71751999999998
                },
                {
                  "x": 265.9416,
                  "y": 192.93801999999997
                },
                {
                  "x": 270.53039,
                  "y": 192.31227999999996
                },
                {
                  "x": 279.70799,
                  "y": 196.06674999999996
                }
              ],
              "href": "location/artificial.html"
            },
            {
              "id": "glassy",
              "points": [
                {
                  "x": 238.30453,
                  "y": 182.40465
                },
                {
                  "x": 248.73357,
                  "y": 186.99344
                },
                {
                  "x": 253.63528,
                  "y": 190.9565
                },
                {
                  "x": 258.11978999999997,
                  "y": 197.63111
                },
                {
                  "x": 262.52144999999996,
                  "y": 206.18296
                },
                {
                  "x": 266.15018,
                  "y": 212.96186
                },
                {
                  "x": 269.17461,
                  "y": 217.0292
                },
                {
                  "x": 273.24195,
                  "y": 220.15793
                },
                {
                  "x": 278.24791,
                  "y": 220.78367
                },
                {
                  "x": 279.18653,
                  "y": 211.50179
                },
                {
                  "x": 282.52384,
                  "y": 207.95589999999999
                },
                {
                  "x": 283.98391,
                  "y": 201.28128999999998
                },
                {
                  "x": 286.48688999999996,
                  "y": 194.60666999999998
                },
                {
                  "x": 279.81228,
                  "y": 198.46543999999997
                },
                {
                  "x": 270.42609999999996,
                  "y": 194.71096999999997
                },
                {
                  "x": 263.75149,
                  "y": 195.12812999999997
                },
                {
                  "x": 261.87426,
                  "y": 182.71751999999998
                },
                {
                  "x": 260.10131,
                  "y": 174.99999999999997
                },
                {
                  "x": 265.62872,
                  "y": 164.04945999999998
                },
                {
                  "x": 262.52144999999996,
                  "y": 161.85935999999998
                }
              ],
              "href": "location/glassy.html"
            },
            {
              "id": "shadow",
              "points": [
                {
                  "x": 269.90578,
                  "y": 230.2311
                },
                {
                  "x": 284.65473,
                  "y": 235.39323
                },
                {
                  "x": 303.53337999999997,
                  "y": 236.86812999999998
                },
                {
                  "x": 301.76350999999994,
                  "y": 244.34656999999999
                },
                {
                  "x": 287.44523999999996,
                  "y": 249.55222999999998
                },
                {
                  "x": 287.44523999999996,
                  "y": 263.12126
                },
                {
                  "x": 283.17983,
                  "y": 271.48149
                },
                {
                  "x": 273.00306,
                  "y": 271.48149
                },
                {
                  "x": 272.26561,
                  "y": 282.71626000000003
                },
                {
                  "x": 260.17147,
                  "y": 280.96749000000005
                },
                {
                  "x": 246.30746,
                  "y": 267.25097000000005
                }
              ],
              "href": "location/shadow.html"
            }
          ]
        },
        {   imageIndex: 40,
          areas: []
        },
        {   imageIndex: 50,
          areas: []
        },
        {   imageIndex: 60,
          areas: []
        },
        {   imageIndex: 70,
          areas: []
        },
        {   imageIndex: 80,
          areas: []
        },
        {   imageIndex: 90,
          areas: []
        },
        {   imageIndex: 100,
          areas: []
        },
        {   imageIndex: 110,
          areas: []
        },
        {   imageIndex: 120,
          areas: []
        },
        {   imageIndex: 130,
          areas: []
        },
        {   imageIndex: 140,
          areas: []
        },
        {   imageIndex: 150,
            areas: []
        }
    ];

    // Initialize
    spriteSheet.onload = () => {
        resizeCanvas(); // Initial draw
        drawFrame(currentFrame); // Ensure initial frame is drawn
        window.addEventListener('resize', resizeCanvas);
        startAnimation(true, initialFrameInterval); // Start initial animation at 16fps
    };

    // Resize Canvas
    function resizeCanvas() {
        const size = Math.min(window.innerWidth, window.innerHeight, 500);
        canvas.width = size;
        canvas.height = size;
        drawFrame(currentFrame);
    }

// Define manual offset variables
let offsetX = 0;
let offsetY = 0;

// Draw Frame
function drawFrame(frameIndex) {
    const x = ((frameIndex - 1) % cols) * frameWidth;
    const y = Math.floor((frameIndex - 1) / cols) * frameHeight;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.imageSmoothingEnabled = false;
    ctx.drawImage(spriteSheet, x, y, frameWidth, frameHeight, 0, 0, canvas.width, canvas.height);

    // Draw clickable areas with a red outline
    const currentFrameAreas = clickableAreas.find(area => area.imageIndex === frameIndex);
    if (currentFrameAreas) {
        const scaleX = canvas.width / originalFrameWidth;
        const scaleY = canvas.height / originalFrameHeight;
        ctx.strokeStyle = 'red';
        ctx.lineWidth = 2;
        currentFrameAreas.areas.forEach(area => {
            ctx.beginPath();
            ctx.moveTo((area.points[0].x + offsetX) * scaleX, (area.points[0].y + offsetY) * scaleY);
            for (let i = 1; i < area.points.length; i++) {
                ctx.lineTo((area.points[i].x + offsetX) * scaleX, (area.points[i].y + offsetY) * scaleY);
            }
            ctx.closePath();
            ctx.stroke();
        });
    }

    // Update frame info
    frameInfo.textContent = `Test ver. 0.4.1 || Frame: ${frameIndex}`;
};
    

    // Start Animation
    function startAnimation(forward = true, interval = initialFrameInterval) {
        clearInterval(animationInterval);  // Clear any existing interval
        animationDirection = forward ? 1 : -1;

        if (isAnimating && interval === buttonFrameInterval) {
            animationInterval = setInterval(updateFrame, interval);
            return; // Prevent starting multiple button animations
        }

        isAnimating = true;
        animationInterval = setInterval(updateFrame, interval);
    }

    // Update Frame
    function updateFrame() {
        currentFrame = (currentFrame + animationDirection - 1 + totalFrames) % totalFrames + 1;
        drawFrame(currentFrame);
    }

    // Stop Animation at Nearest Multiple of 10 in the Correct Direction
    function stopAnimationNearest(direction) {
        clearInterval(animationInterval);
        animationInterval = setInterval(() => {
            currentFrame = (currentFrame + direction - 1 + totalFrames) % totalFrames + 1;
            drawFrame(currentFrame);

            // Ensure stopping on next multiple of 10 in the correct direction
            if (currentFrame % 10 === 0) {
                clearInterval(animationInterval);
                isAnimating = false; // Reset the flag
            }
        }, buttonFrameInterval);
    }

// Slow Down Animation and Stop at Nearest Multiple of 10
function slowDownAnimationNearest(direction) {
    clearInterval(animationInterval);
    isAnimating = true;

    let interval = buttonFrameInterval;
    const decelerationFactor = 1.5; // Factor by which to slow down each step
    const minInterval = 1000 / 13; // Minimum interval for 12fps

    function decelerate() {
        currentFrame = (currentFrame + direction - 1 + totalFrames) % totalFrames + 1;
        drawFrame(currentFrame);

        if (currentFrame % 10 === 0 && interval >= minInterval) {
            clearInterval(animationInterval);
            isAnimating = false; // Reset the flag
        } else {
            interval = Math.min(interval * decelerationFactor, minInterval);
            clearInterval(animationInterval);
            animationInterval = setInterval(decelerate, interval);
        }
    }

    animationInterval = setInterval(decelerate, interval);
}

    // Handle Key Down
    function handleKeyDown(event) {
        if ((event.key === 'ArrowLeft' || event.key === 'ArrowRight') && !keyPressed) {
            keyPressed = true;
            startAnimation(event.key === 'ArrowRight', buttonFrameInterval);
        }
    }

    // Handle Key Up
    function handleKeyUp(event) {
        if (event.key === 'ArrowLeft' || event.key === 'ArrowRight') {
            keyPressed = false;
            stopAnimationNearest(event.key === 'ArrowRight' ? 1 : -1);
        }
    }

        // Handle Scroll
        function handleScroll(event) {
          const now = Date.now();
          if (now - lastScrollTime < scrollFrameInterval) return;
          lastScrollTime = now;

          clearInterval(animationInterval); // Stop any currently running animations
          isAnimating = false; // Reset the flag

          const delta = event.deltaY > 0 ? 1 : -1;
          animationDirection = delta; // Set the animation direction based on the scroll direction
          currentFrame = (currentFrame + delta - 1 + totalFrames) % totalFrames + 1;
          drawFrame(currentFrame);

          // Ensure the animation stops on multiples of 10
          stopAnimationNearest(delta);
      }

    // Handle Touch Start
    function handleTouchStart(event) {
        event.preventDefault();
        const button = event.target;
        button.style.opacity = '1';

        if (button.id.includes('leftButton')) {
            startAnimation(false, buttonFrameInterval);
        } else if (button.id.includes('rightButton')) {
            startAnimation(true, buttonFrameInterval);
        }

        button.addEventListener('touchend', function touchEnd() {
            button.style.opacity = '0.2';
            stopAnimationNearest(button.id.includes('rightButton') ? 1 : -1);
            button.removeEventListener('touchend', touchEnd);
        });

        button.addEventListener('touchmove', function touchMove() {
            button.style.opacity = '0.2';
            stopAnimationNearest(button.id.includes('rightButton') ? 1 : -1);
            button.removeEventListener('touchmove', touchMove);
        });
    }

    // Handle Touch Start for Refresh Buttons
    function handleRefreshTouchStart(event) {
        event.preventDefault();
        const button = event.target;
        button.style.opacity = '1';

        startAnimation(true, initialFrameInterval); // Mimic the click behavior

        button.addEventListener('touchend', function touchEnd() {
            button.style.opacity = '0.2';
            button.removeEventListener('touchend', touchEnd);
        });

        button.addEventListener('touchmove', function touchMove() {
            button.style.opacity = '0.2';
            button.removeEventListener('touchmove', touchMove);
        });
    }

// Handle Click Events
canvas.addEventListener('click', function(event) {
    const rect = canvas.getBoundingClientRect();
    const x = (event.clientX - rect.left) * (canvas.width / rect.width);
    const y = (event.clientY - rect.top) * (canvas.height / rect.height);

    const currentFrameAreas = clickableAreas.find(area => area.imageIndex === currentFrame);
    if (currentFrameAreas) {
        const scaleX = canvas.width / originalFrameWidth;
        const scaleY = canvas.height / originalFrameHeight;
        currentFrameAreas.areas.forEach(area => {
            const translatedPoints = area.points.map(point => ({
                x: (point.x + offsetX) * scaleX,
                y: (point.y + offsetY) * scaleY
            }));
            if (isPointInPolygon({ x, y }, translatedPoints)) {
                handleClick(area.href);
            }
        });
    }
});

// Cursor change on hover
canvas.addEventListener('mousemove', function(event) {
    const rect = canvas.getBoundingClientRect();
    const x = (event.clientX - rect.left) * (canvas.width / rect.width);
    const y = (event.clientY - rect.top) * (canvas.height / rect.height);

    const currentFrameAreas = clickableAreas.find(area => area.imageIndex === currentFrame);
    if (currentFrameAreas) {
        const scaleX = canvas.width / originalFrameWidth;
        const scaleY = canvas.height / originalFrameHeight;
        let isHovering = false;
        currentFrameAreas.areas.forEach(area => {
            const translatedPoints = area.points.map(point => ({
                x: (point.x + offsetX) * scaleX,
                y: (point.y + offsetY) * scaleY
            }));
            if (isPointInPolygon({ x, y }, translatedPoints)) {
                isHovering = true;
            }
        });
        canvas.style.cursor = isHovering ? 'pointer' : 'default';
    } else {
        canvas.style.cursor = 'default';
    }
});

// Handle iframe src change
    function handleClick(href) {
        document.getElementById('overlay').style.opacity = '1';
        setTimeout(() => {
            if (href) {
                let iframe = document.getElementById('clickableIframe');
                iframe.src = href;
                iframe.style.display = 'block'; // Show the iframe
            }
            setTimeout(() => {
                if (href) {
                    document.getElementById('overlay').style.opacity = '0';
                }
            }, 1000); 
        }, 1000); 
        
    };


    function isPointInPolygon(point, vs) {
        let x = point.x, y = point.y;
    
        let inside = false;
        for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {
            let xi = vs[i].x, yi = vs[i].y;
            let xj = vs[j].x, yj = vs[j].y;
    
            let intersect = ((yi > y) != (yj > y)) &&
                (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
            if (intersect) inside = !inside;
        }
    
        return inside;
    };
    
    

    // Add event listeners
    function addEventListeners() {
        setTimeout(() => {
            // Horizontal buttons
            document.getElementById('leftButtonHorizontal').addEventListener('mousedown', () => startAnimation(false, buttonFrameInterval));
            document.getElementById('rightButtonHorizontal').addEventListener('mousedown', () => startAnimation(true, buttonFrameInterval));
            document.getElementById('leftButtonHorizontal').addEventListener('mouseup', () => stopAnimationNearest(-1));
            document.getElementById('rightButtonHorizontal').addEventListener('mouseup', () => stopAnimationNearest(1));

            // Add touch event listeners for horizontal buttons
            document.getElementById('leftButtonHorizontal').addEventListener('touchstart', handleTouchStart);
            document.getElementById('rightButtonHorizontal').addEventListener('touchstart', handleTouchStart);

            // Vertical buttons
            document.getElementById('leftButtonVertical').addEventListener('mousedown', () => startAnimation(false, buttonFrameInterval));
            document.getElementById('rightButtonVertical').addEventListener('mousedown', () => startAnimation(true, buttonFrameInterval));
            document.getElementById('leftButtonVertical').addEventListener('mouseup', () => stopAnimationNearest(-1));
            document.getElementById('rightButtonVertical').addEventListener('mouseup', () => stopAnimationNearest(1));

            // Add touch event listeners for vertical buttons
            document.getElementById('leftButtonVertical').addEventListener('touchstart', handleTouchStart);
            document.getElementById('rightButtonVertical').addEventListener('touchstart', handleTouchStart);

            // Refresh buttons
            document.getElementById('refreshButton').addEventListener('click', () => startAnimation(true, initialFrameInterval));
            document.getElementById('refreshButtonVertical').addEventListener('click', () => startAnimation(true, initialFrameInterval));
            document.getElementById('refreshButtonBottomRight').addEventListener('click', () => startAnimation(true, initialFrameInterval));

            // Add touch event listeners for refresh buttons
            document.getElementById('refreshButton').addEventListener('touchstart', handleRefreshTouchStart);
            document.getElementById('refreshButtonVertical').addEventListener('touchstart', handleRefreshTouchStart);
            document.getElementById('refreshButtonBottomRight').addEventListener('touchstart', handleRefreshTouchStart);

            // Keyboard buttons
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);

            // Scroll wheel
            canvas.addEventListener('wheel', handleScroll);
        
            window.addEventListener('message', function(event) {
                if (event.data === 'closeIframe') {
                    let iframe = document.getElementById('clickableIframe');
                    document.getElementById('overlay').style.opacity = '1';
                    setTimeout(() => {
                        iframe.style.display = 'none';
                        iframe.src = ''; // Clear the iframe src to stop loading
                            setTimeout(() => {
                                document.getElementById('overlay').style.opacity = '0';
                        }, 1000); 
                    }, 1000); 
                }
            });

        }, 17000);
    }



    function isPointInPolygon(point, vs) {
        let x = point.x, y = point.y;
    
        let inside = false;
        for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {
            let xi = vs[i].x, yi = vs[i].y;
            let xj = vs[j].x, yj = vs[j].y;
    
            let intersect = ((yi > y) != (yj > y)) &&
                (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
            if (intersect) inside = !inside;
        }
    
        return inside;
    }
    


    // Function to send the audio URL to the parent
    window.addEventListener('load', () => {
            const pageTitle = document.title; // Get the current iframe page's title
            const audioUrl = 'sounds/nav00.m4a'; // Change this to the appropriate audio URL for each iframe page

            window.parent.postMessage({
              action: 'changeAudio',
              url: audioUrl,
              title: pageTitle // Include the page title in the message
            }, '*');
    });

    // Add event listeners
    addEventListeners();
    
    window.slowDownAnimationNearest = slowDownAnimationNearest;

      // Function to handle back button and prevent default behavior
  function preventBackNavigation() {
    // Prevent the default back navigation
    history.pushState(null, null, window.location.href);
  }

  // Listen for the popstate event
  window.addEventListener('popstate', function(event) {
    preventBackNavigation();
  });

  // Initialize a state to prevent the initial popstate event from being fired
  history.pushState(null, null, window.location.href);

});


